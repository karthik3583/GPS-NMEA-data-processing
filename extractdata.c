#include <stdio.h>
#include <tchar.h>
#include <string.h>


unsigned char gpsData[] = {'$','G','P','G','G','A',',','0','2','5','5','2','6','.','0','0','0',',','0','6','5','3','.','4','0','9','1','4','0',',','N',',','0','7','9','5','4','.','1','5','0','0','1','5',',','E',',','1',',','7',' ',',','1','.','0','8',',','2','2','.','0','1','3',',','M',',','-','9','6','.','6','0','8',',','M',',',',','*','4','D',
'$','G','P','G','L','L',',','0','6','5','3','.','4','0','9','1','4','0',',','N',',','0','7','9','5','4','.','1','5','0','0','1','5',',','E',',','0','2','5','5','2','6','.','0','0','0',',','A',',','A',' ','*','5','8',
'$','G','P','G','S','A',',','A',',','3',',','2','1',',','2','9',',','1','8',',','2','4',',','2','2',',','2','5',',','1','5',',',',',',',',',',',',','1','.','9','8',',','1','.','0','8',',','1','.','6',' ','7','*','0','F',
'$','G','P','G','S','V',',','4',',','1',',','1','4',',','2','1',',','5','8',',','0','2','0',',','3','6',',','1','4',',','5','6',',','2','4','6',',','2','5',',','2','9',',','3','8',',','1','7','3',',',' ','3','6',',','1','8',',','3','2',',','3','5','4',',','3','6','*','7','E',
'$','G','P','G','S','V',',','4',',','2',',','1','4',',','2','4',',','3','0',',','0','7','1',',','4','9',',','2','2',',','2','5',',','3','1','7',',','3','4',',','0','6',',','1','9',',','3','0','4',',',' ','2','0',',','2','5',',','1','1',',','1','5','7',',','3','3','*','7','E',
'$','G','P','G','S','V',',','4',',','3',',','1','4',',','1','5',',','0','6',',','0','3','5',',','3','2',',','0','3',',','0','4',',','3','1','0',',',',','3','1',',','0','3',',','2','0','5',',',',','3',' ','0',',','0','0',',','2','4','0',',','*','7','8',
'$','G','P','G','S','V',',','4',',','4',',','1','4',',','4','2',',',',',',','3','9',',','5','0',',',',',',','3','9','*','7','F',
'$','G','P','R','M','C','0','2','5','5','2','6','.','0','0','0',',','A',',','0','6','5','3','.','4','0','9','1','4','0',',','N',',','0','7','9','5','4','.','1','5','0','0','1','5',',','E',',','0',' ','.','0','0','0',',','1','1','5','.','0',',','2','6','0','3','1','3',',',',',',','A','*','6','F',
'$','G','P','V','T','G',',','1','1','5','.','0',',','T',',',',','M',',','0','.','0','0','0',',','N',',','0','.','0','0','0',',','K',',','A','*','0','8',
'$','G','P','Z','D','A',',','0','2','5','5','2','6','.','0','0','0',',','2','6',',','0','3',',','2','0','1','3',',',',','*','5','7','\0'};
 
unsigned char latitude[15], longitude[15], input;
unsigned int i, j, k;
 
int _tmain(int argc, _TCHAR* argv[])
{
 
start:   printf("gpsDATA = %s\n\n", gpsData);
         input = '\0';
 
         printf("Parse String? Y/N: ");
         scanf("%s", &input);
         if((input == 'Y') || (input == 'y'))
                ;
         else
            goto exit;
 
         input = '\0';
 
         i = 0;
         j = 0;
         k = 0;
 
next:    while(gpsData[i] != '$'){
                 i++;
         }
 
         if((gpsData[i+1] == 'G') && (gpsData[i+2] == 'P') && (gpsData[i+3] == 'R') && (gpsData[i+4] == 'M') && (gpsData[i+5] == 'C')){
                        while(gpsData[i++] != 'A');
                        i++;
                        while(gpsData[i] != ',')
                                latitude[k++] = gpsData[i++];
                        i += 3;
                        latitude[k] = '\0';
                        printf("Latitude = %s\n", latitude);
 
                        k = 0;
 
                        while(gpsData[i] != ',')
                                longitude[k++] = gpsData[i++];
                        longitude[k] = '\0';
                        printf("Longitude = %s\n\n", longitude);
 
         }
         else{
              i++;
              goto next;
         }
 
         printf("Parse again? Y/N: ");
         scanf("%s", &input);
         if((input == 'Y') || (input == 'y')){
                goto start;
         }
         else
exit:        return 0;
 
}
